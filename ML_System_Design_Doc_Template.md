# ML System Design Doc - [RU]
## Дизайн ML системы - \<Автоматизаци определения ориентации железнодорожных вагонов\> \<MVP 1\>

## 1. Цели и предпосылки

### 1.1. Зачем идем в разработку продукта?

**Бизнес-цель (Product Owner)**
Стратегическая цель - повышение операционной эффективности диспетчерской службы за счет автоматизации процесса идентификации ориентации подвижного состава. 


Внедрение ML-решения позволит:
- Снижение OPEX на 85% за счет автоматизации ручного труда диспетчеров
- Повышение качества мониторинга за счет снижения ошибок идентификации с 7.3% до <1%, что минимизирует риски аварий и необоснованных ремонтов.
- Масштабирование без роста затрат — подключение новых полигонов без найма персонала, обеспечение 24/7 мониторинга без сменной работы.

**Почему станет лучше, чем сейчас (Product Owner & Data Scientist)**


*Текущее состояние:*
- Ручной анализ видеозаписей операторами
- Субъективность оценки при плохой видимости
- Отсутствие единой базы данных ориентации вагонов
- Невозможность масштабирования без увеличения штата

*Целевое состояние:*
- Автоматическая детекция референтных объектов в реальном времени
- Объективная оценка с доверительной вероятностью >95%
- Интеграция с существующей системой мониторинга через REST API
- Масштабируемость на любой полигон без дополнительных затрат

**Критерии успеха итерации (Product Owner)**
1. Достижение точности определения ориентации вагона ≥ 92% на валидационной выборке
2. Время отработки модели ≤ 150 мс на кадр


### 1.2. Бизнес-требования и ограничения

**Бизнес-требования**
- Система должна определять ориентацию вагона с точностью ≥90% 
- Время обработки одного вагона ≤ 30 сек 
- Работа в условиях ограниченной видимости (ночь, осадки)
- Интеграция с АСУ "Транс-Телематика" через API


**Бизнес-ограничения**
1. **Технические:**
   - Частота кадров видеопотока: 25 fps (фиксировано)
   - Разрешение камер: 1920x1080 или 1280x720

2. **Нормативные:**
   - Соответствие 152-ФЗ "О персональных данных"
   - Соблюдение политики информационной безопасности заказчика

**Ожидания от итерации**
1. Рабочий прототип ML-модели
2. Техническая документация
3. Отчет по результатам тестирования на исторических данных
4. План пилотного внедрения с метриками эффективности

### 1.3. Что входит в скоуп проекта/итерации

**Включено в итерацию (Data Scientist)**
| Компонент | Описание |
|-----------|----------|
| Data Pipeline | ETL процесс для сбора и разметки данных |
| ML Model | Модель детекции объектов |
| Rule Engine | Алгоритм принятия решения об ориентации |
| API Service | REST API с эндпоинтами для инференса |
| Monitoring | Базовый мониторинг метрик |

**Исключено из итерации**
1. Разработка UI/UX интерфейса
2. Мобильное приложение
3. Система автоматического ретрейнинга


### 1.4. Предпосылки решения

**Данные и обоснование выбора**
| Параметр | Значение | Обоснование |
|----------|----------|-------------|
| Источники данных | Видеопоток с камер, метаданные вагонов | Доступность, репрезентативность |
| Объем выборки | ≥ 15 000 размеченных кадров | Статистическая значимость |
| Горизонт прогноза | 3-5 секунд (один вагон) | Скорость прохода состава |
| Гранулярность | Покадровая с агрегацией | Баланс точности и скорости |
| Частота обновления | Ежеквартально | Стабильность условий съемки |

**Научно-техническое обоснование**
1. **Выбор архитектуры:** Сверточные нейросети (CNN) доказали свою эффективность в задачах детекции промышленных объектов (YOLOv11)
2. **Аугментация данных:** Учет специфики железнодорожного транспорта (снег, дождь, засветы)

